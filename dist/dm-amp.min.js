!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return i}));var r=n(2),a=null!=Object(r.a)("dmdebug")&&"false"!=Object(r.a)("dmdebug"),i=t.env.API_URL?t.env.API_URL:"https://api.dailymotion.com/"}).call(this,n(7))},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function o(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))},a=function(t,e){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(t){i=[6,t],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function i(t,e,n,i){return void 0===e&&(e=50),void 0===n&&(n=1/0),void 0===i&&(i=""),r(this,void 0,void 0,(function(){return a(this,(function(r){return[2,new Promise((function(r,a){var o=0,s=setInterval((function(){var l=t(),u=o>n||l;o+=e,l?(r(),clearInterval(s)):u&&(a(new Error("waitFor(): "+i)),clearInterval(s))}),e)}))]}))}))}function o(t){return r(this,void 0,void 0,(function(){return a(this,(function(e){return[2,new Promise((function(e){setTimeout((function(){e()}),t)}))]}))}))}},function(t,e,n){"use strict";function r(t){return new URLSearchParams(window.location.search).get(t)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var r=n(0);var a=function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function o(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))},i=function(t,e){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(t){i=[6,t],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function o(t){var e=this;return new Promise((function(n,r){return a(e,void 0,void 0,(function(){var e;return i(this,(function(a){switch(a.label){case 0:return[4,fetch(t)];case 1:return 200===(e=a.sent()).status?n(e.json()):r(),[2]}}))}))})).catch((function(t){!0===r.b&&console.log("API calling error")}))}var s=n(1);var l=function(){function t(){this.titleEl=null}return t.prototype.setVideoTitle=function(t){return this.titleEl=document.createElement("p"),this.titleEl.innerHTML=t,this.titleEl.className="dm__video-title",this.titleEl},t.prototype.cleanup=function(){delete this.titleEl,this.titleEl.remove()},t}(),u=function(){function t(){this.infoCardEl=null}return t.prototype.setInfoCard=function(t){this.infoCardEl=document.createElement("div"),this.infoCardEl.className="dm__info-card";var e=document.createElement("div");e.className="dm__text-wrapper";var n=document.createElement("p");n.innerHTML=t.title,n.className="dm__video-title";var r=document.createElement("p");r.innerHTML=t.description,r.className="dm__video-desc",e.append(n),e.append(r);var a=document.createElement("picture");a.className="dm__ava-wrapper";var i=document.createElement("img");return i.src=t["owner.avatar_190_url"],i.className="dm__owner-ava",a.append(i),this.infoCardEl.append(e),this.infoCardEl.append(a),this.infoCardEl},t.prototype.cleanup=function(){this.infoCardEl&&(this.infoCardEl.remove(),delete this.infoCardEl)},t}(),c=(n(8),function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function o(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))}),d=function(t,e){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(t){i=[6,t],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},p=function(){function t(t,e,n){this.id="",this.rootEl=null,this.playerParams=null,this.searchParams=null,this.videoParams=null,this.keywords=null,this.videoTitle=null,this.infoCard=null,this.players=[],this.cpeId=[],this.cpeParams={},this.multiplayerParams=null,this.rootEl=e,this.id=t,this.keywords=n,this.addEventListeners(),this.extractAttrs()}return t.prototype.addEventListeners=function(){var t=this;document.addEventListener("dm-api-ready",(function(e){e.detail===t.id&&t.loadDmPlayer(t.rootEl)})),document.addEventListener("dm-player-extracted",(function(e){e.detail===t.id&&t.prepareSearchParams()})),document.addEventListener("dm-search-params-ready",(function(e){e.detail===t.id&&(null===t.playerParams.videoId?t.searchVideo():t.getVideoInfo(t.playerParams.videoId,!0))})),document.addEventListener("dm-video-updated",(function(e){t.getVideoInfo(e.detail.videoId,!1)}))},t.prototype.extractAttrs=function(){var t=this.rootEl;this.playerParams={maxWordSearch:t.getAttribute("maxWordSearch")?Number(t.getAttribute("maxWordSearch")):15,minWordLength:t.getAttribute("minWordLength")?Number(t.getAttribute("minWordLength")):4,minWordSearch:t.getAttribute("minWordSearch")?Number(t.getAttribute("minWordSearch")):2,videoId:t.getAttribute("videoId")?t.getAttribute("videoId"):null,language:t.getAttribute("language")?t.getAttribute("language"):"",sort:t.getAttribute("sort")?t.getAttribute("sort"):"recent",owners:t.getAttribute("owners")?t.getAttribute("owners"):"",category:t.getAttribute("category")?t.getAttribute("category"):"",excludeIds:t.getAttribute("excludeIds")?t.getAttribute("excludeIds"):"",searchInPlaylist:!!t.getAttribute("searchInPlaylist")&&t.getAttribute("searchInPlaylist"),syndication:t.getAttribute("syndication")?t.getAttribute("syndication"):"",controls:"false"!=t.getAttribute("controls"),adsParams:t.getAttribute("adsParams")?t.getAttribute("adsParams"):"contextual",cpeId:t.getAttribute("cpeId")?t.getAttribute("cpeId").split(","):[""],keywordsSelector:t.getAttribute("keywordsSelector")?t.getAttribute("keywordsSelector"):null,startDate:t.getAttribute("startDate")?t.getAttribute("startDate"):null,getUpdatedVideo:"false"!=t.getAttribute("getUpdatedVideo"),preVideoTitle:t.getAttribute("preVideoTitle")?t.getAttribute("preVideoTitle"):null,showVideoTitle:"false"!=t.getAttribute("showVideoTitle")&&null!=t.getAttribute("showVideoTitle"),showInfoCard:"false"!=t.getAttribute("showInfoCard")&&null!=t.getAttribute("showInfoCard"),autoPlayMute:"false"!=t.getAttribute("autoPlayMute"),queueEnable:"false"!=t.getAttribute("queueEnable"),queueEnableNext:"false"!=t.getAttribute("queueEnableNext"),pipAtStart:"false"!=t.getAttribute("pipAtStart")&&null!=t.getAttribute("pipAtStart"),noStp:"false"!=t.getAttribute("noStp")&&null!=t.getAttribute("noStp"),noPip:"false"!=t.getAttribute("noPip")&&null!=t.getAttribute("noPip"),scrollToPause:"false"!=t.getAttribute("scrollToPause")&&null!=t.getAttribute("scrollToPause"),stpSound:"false"!=t.getAttribute("stpSound")&&null!=t.getAttribute("stpSound"),playerStyleEnable:"false"!=t.getAttribute("playerStyleEnable")&&null!=t.getAttribute("playerStyleEnable"),playerStyleColor:t.getAttribute("playerStyleColor")?t.getAttribute("playerStyleColor"):null},this.multiplayerParams={adCoverPlay:"true"==t.getAttribute("adCoverPlay"),closePip:"true"==t.getAttribute("closePip")},!0===r.b&&console.log("%c DM Player Params: ","background: #56C7FF; color: #232323",this.playerParams);var e=new CustomEvent("dm-player-extracted",{detail:this.id});document.dispatchEvent(e)},t.prototype.prepareSearchParams=function(){this.cpeId=this.playerParams.cpeId;var t=this.findKeywords(this.playerParams.keywordsSelector);this.searchParams={fields:this.playerParams.showInfoCard?"id,title,description,owner.avatar_190_url":"id,title",limit:1,sort:this.playerParams.sort},"relevance"===this.playerParams.sort&&(this.searchParams.search=this.keywords?this.keywords:t.sort((function(t,e){return e.length-t.length})).slice(0,this.playerParams.maxWordSearch).join(" ")),null!==this.playerParams.startDate&&(this.searchParams.created_after=new Date(this.playerParams.startDate).getTime()/1e3),this.playerParams.searchInPlaylist||(this.searchParams.private=1,this.searchParams.flags="no_live,exportable"+(this.playerParams.owners.length>0?"":",verified"),this.searchParams.longer_than=.35,this.playerParams.owners&&(this.searchParams.owners=this.playerParams.owners),this.playerParams.category&&(this.searchParams.channel=this.playerParams.category),this.playerParams.excludeIds&&(this.searchParams.exclude_ids=this.playerParams.excludeIds)),this.playerParams.language&&(this.searchParams.language=this.playerParams.language);var e=new CustomEvent("dm-search-params-ready",{detail:this.id});document.dispatchEvent(e)},t.prototype.loadDmPlayer=function(t){var e,n=document.createElement("div"),r="";""===this.playerParams.adsParams?r+="ads_params=contextual":r+="ads_params="+(e=this.playerParams.adsParams,String(e).replace(/&/g,"%26").replace(/=/g,"%3d")),""!==this.playerParams.syndication&&(r+="&syndication="+this.playerParams.syndication),!0!==this.playerParams.controls&&(r+="&controls="+this.playerParams.controls),n.setAttribute("class","dailymotion-cpe"),n.setAttribute("video-id",this.videoParams.private_id?this.videoParams.private_id:this.videoParams.id),n.setAttribute("query-string",r),!0===this.playerParams.pipAtStart&&n.setAttribute("pip-at-start",""),!0===this.playerParams.noStp&&n.setAttribute("no-stp",""),!0===this.playerParams.noPip&&n.setAttribute("no-pip",""),!1===this.playerParams.queueEnable&&n.setAttribute("no-queue",""),!1===this.playerParams.queueEnableNext&&n.setAttribute("no-autonext",""),!1!==this.playerParams.searchInPlaylist&&n.setAttribute("Playlist-id",this.playerParams.searchInPlaylist),null!==t.getAttribute("width")&&(this.playerParams.width=Number(t.getAttribute("width")),n.setAttribute("width",t.getAttribute("width"))),null!==t.getAttribute("height")&&(this.playerParams.height=Number(t.getAttribute("height")),n.setAttribute("height",t.getAttribute("height")));var a={};if(!0===this.playerParams.scrollToPause&&(a.scroll_to_pause=!0),!0===this.playerParams.stpSound&&(a.stp_sound=!0),!0===this.playerParams.playerStyleEnable&&(a.player_style_enable=!0),null!==this.playerParams.playerStyleColor&&(a.player_style_color=this.playerParams.playerStyleColor),this.cpeParams=a,t.appendChild(n),null!==this.playerParams.preVideoTitle){var i=function(t){var e=document.createElement("p");return e.innerHTML=t,e.className="dm__pre-video-title",e}(this.playerParams.preVideoTitle);t.insertAdjacentElement("afterbegin",i)}var o=new CustomEvent("dm-video-holder-ready");document.dispatchEvent(o)},t.prototype.setVideo=function(t,e){if(this.videoParams=t,e){var n=new CustomEvent("dm-api-ready",{detail:this.id});document.dispatchEvent(n)}this.updateVideoInfo()},t.prototype.updateVideoInfo=function(){if(!0===this.playerParams.showVideoTitle){var t=new l;null!==this.videoTitle&&this.videoTitle.remove(),this.videoTitle=t.setVideoTitle(this.videoParams.title),this.rootEl.insertAdjacentElement("afterend",this.videoTitle)}if(!0===this.playerParams.showInfoCard){var e=new u;null!==this.infoCard&&this.infoCard.remove(),this.infoCard=e.setInfoCard(this.videoParams),this.rootEl.insertAdjacentElement("afterend",this.infoCard)}},t.prototype.getVideoInfo=function(t,e){return c(this,void 0,void 0,(function(){var n;return d(this,(function(a){switch(a.label){case 0:return[4,o(r.a+"/video/"+t+"?fields="+this.searchParams.fields)];case 1:return n=a.sent(),this.setVideo(n,e),[2]}}))}))},t.prototype.searchVideo=function(){return c(this,void 0,void 0,(function(){var t,e,n=this;return d(this,(function(a){switch(a.label){case 0:return!0===r.b&&"relevance"===this.playerParams.sort&&console.log("%c DM related ","background: #56C7FF; color: #232323","Search: "+this.searchParams.search),[4,Object(s.b)((function(){return null!==n.searchParams}),100,5e3,"Timeout waiting for searchParams not null")];case 1:return a.sent(),t=Object.entries(this.searchParams).map((function(t){var e=t[0],n=t[1];return encodeURIComponent(e)+"="+encodeURIComponent(n)})).join("&"),[4,o(r.a+(this.playerParams.searchInPlaylist?"playlist/"+this.playerParams.searchInPlaylist+"/videos":"videos")+"?"+t)];case 2:return(e=a.sent())?e.total>0?(this.setVideo(e.list[0],!0),[3,6]):[3,3]:[3,6];case 3:return this.searchParams.search=this.searchParams.search.substring(0,this.searchParams.search.lastIndexOf(" ")),this.searchParams.search.split(" ").length>=this.playerParams.minWordSearch&&this.searchParams.search.length>0?[4,this.searchVideo()]:[3,5];case 4:return a.sent(),[3,6];case 5:!0===r.b&&console.log("%c DM related ","background: #56C7FF; color: #232323","Can not find related video. Fallback video used."),this.getFallbackVideo(),a.label=6;case 6:return[2]}}))}))},t.prototype.getFallbackVideo=function(){return c(this,void 0,void 0,(function(){var t,e;return d(this,(function(n){switch(n.label){case 0:return t=Math.floor(Date.now()/1e3),2592e3,[4,o(r.a+(this.playerParams.searchInPlaylist?"playlist/"+this.playerParams.searchInPlaylist+"/videos?":"videos?owners="+this.playerParams.owners)+(this.playerParams.getUpdatedVideo?"&created_after="+(t-2592e3):"")+"&sort=random&limit=1&fields="+this.searchParams.fields)];case 1:return(e=n.sent())&&(e.list.length>0?this.setVideo(e.list[0],!0):!0===r.b&&console.warn("DM related Unable to find a fallback video")),[2]}}))}))},t.prototype.findKeywords=function(t){var e=[""];if(null!==t)try{var n=document.querySelector(t);e=this.sanitizeKeywords(n.textContent?n.textContent:n.getAttribute("content"))}catch(e){!0===r.b&&console.error("Can't find selector: ",t)}else null===t&&void 0!==document.getElementsByTagName("h1")[0]&&(e=this.sanitizeKeywords(document.getElementsByTagName("h1")[0].textContent));return e},t.prototype.sanitizeKeywords=function(t){var e=this;return t.replace(/[^- \u3131-\uD79D a-zA-Z0-9 \u00C0-\u00FF \u0900-\u097F \u0621-\u064A \u0660-\u0669 \u0E00-\u0E7F \u0153]/g," ").split(" ").filter((function(t){return t.length>=e.playerParams.minWordLength}))},t}();e.a=p},function(t,e,n){"use strict";var r,a=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function s(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function l(t,e){for(var n={},r=[],a=0;a<t.length;a++){var i=t[a],l=e.base?i[0]+e.base:i[0],u=n[l]||0,c="".concat(l," ").concat(u);n[l]=u+1;var d=s(c),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(o[d].references++,o[d].updater(p)):o.push({identifier:c,updater:y(p,e),references:1}),r.push(c)}return r}function u(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var o=i(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var c,d=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function p(t,e,n,r){var a=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=d(e,a);else{var i=document.createTextNode(a),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(i,o[e]):t.appendChild(i)}}function h(t,e,n){var r=n.css,a=n.media,i=n.sourceMap;if(a?t.setAttribute("media",a):t.removeAttribute("media"),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var f=null,m=0;function y(t,e){var n,r,a;if(e.singleton){var i=m++;n=f||(f=u(e)),r=p.bind(null,n,i,!1),a=p.bind(null,n,i,!0)}else n=u(e),r=h.bind(null,n,e),a=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else a()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=a());var n=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var a=s(n[r]);o[a].references--}for(var i=l(t,e),u=0;u<n.length;u++){var c=s(n[u]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=i}}}},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var a=(o=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),i=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[n].concat(i).concat([a]).join("\n")}var o,s,l;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(r)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(a[o]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);r&&a[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},function(t,e,n){"use strict";var r=n(1),a=n(3),i=function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function o(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))},o=function(t,e){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(t){i=[6,t],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=function(){function t(t){this.players=[],this.adPlaying="",this.multiplayerParams=null,this.videoEvents(),this.multiplayerParams=t}return t.prototype.videoEvents=function(){var t=this;window.addEventListener("cpeready",(function(e){var n=e.detail.players;t.players=n;for(var r=function(e){var r=n[e];r.addEventListener("videochange",(function(e){return i(t,void 0,void 0,(function(){var t,e;return o(this,(function(n){return t=r.video,e=new CustomEvent("dm-video-updated",{detail:{videoId:t.videoId}}),document.dispatchEvent(e),[2]}))}))})),r.addEventListener("ad_play",(function(e){""===t.adPlaying&&(t.adPlaying=r.id,!0===t.multiplayerParams.adCoverPlay&&t.toggleDisable(),!0===t.multiplayerParams.closePip&&t.togglePlay(r.id))})),r.addEventListener("ad_end",(function(e){""!==t.adPlaying&&(t.adPlaying="",t.multiplayerParams.adCoverPlay&&t.toggleDisable())})),r.addEventListener("playing",(function(e){!0===t.multiplayerParams.closePip&&t.togglePlay(r.id)}))},a=0;a<n.length;a++)r(a)})),window.addEventListener("cpepipclose",(function(t){t.detail.player.pause()}))},t.prototype.togglePlay=function(t){for(var e=0;e<this.players.length;e++)if(this.players[e].id!==t){var n=this.players[e].parentNode;this.players[e].pause(),n.classList.remove("pip")}},t.prototype.toggleDisable=function(){for(var t=0;t<this.players.length;t++){var e=this.players[t].parentNode;""!==this.adPlaying&&this.adPlaying!==this.players[t].id?e.classList.add("dm-disabled"):e.classList.remove("dm-disabled")}},t}(),l=function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function o(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))},u=function(t,e){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(t){i=[6,t],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c=function(){function t(t,e){this.rootEls=null,this.scriptLoaded=!1,this.keywords=null,this.rootEls=t,this.keywords=e,this.eventListeners(),this.renderElement()}return t.prototype.eventListeners=function(){var e=this;document.addEventListener("dm-video-holder-ready",(function(){return l(e,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,Object(r.b)((function(){return null!==t.player[0]}),500,2e3,"Timeout waiting player ready")];case 1:return e.sent(),!0!==this.scriptLoaded&&(this.loadScript(t.player[0].cpeId,t.player[0].cpeParams),this.scriptLoaded=!0),[2]}}))}))}))},t.prototype.listenVideoEvents=function(){new s(t.player[0].multiplayerParams)},t.prototype.renderElement=function(){return l(this,void 0,void 0,(function(){var e;return u(this,(function(n){for(e=0;e<this.rootEls.length;e++)t.player[e]=new a.a("dm_"+e,this.rootEls[e],0===e&&null!==this.keywords?this.keywords:null);return this.listenVideoEvents(),[2]}))}))},t.renderOnDemand=function(t,e){return l(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return this.player.push(new a.a("dm_"+this.player.length+1,t,e)),[4,Object(r.a)(1e3)];case 1:return n.sent(),window.cpe.parse(),[2]}}))}))},t.prototype.loadScript=function(t,e){var n=t[0];/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(n=t[1]?t[1]:t[0]);var r,a,i,o,s,l,u,c,d=new Date;r=window,a=document,i="script",o="cpe",s=n,l=e,r.WDMObject=o,r[o]=r[o]||function(){(r[o].q=r[o].q||[]).push(arguments)},r[o].l=1*d,r[o].i=s,r[o].f=l,r[o].g=void 0,(u=a.createElement(i)).async=1,u.src="//api.dmcdn.net/pxl/cpe/client.min.js",(c=a.getElementsByTagName(i)[0]).parentNode.insertBefore(u,c)},t.player=[],t}();e.a=c},function(t,e){var n,r,a=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var l,u=[],c=!1,d=-1;function p(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&h())}function h(){if(!c){var t=s(p);c=!0;for(var e=u.length;e;){for(l=u,u=[];++d<e;)l&&l[d].run();d=-1,e=u.length}l=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new f(t,e)),1!==u.length||c||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e,n){var r=n(4),a=n(9);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var i={insert:"head",singleton:!1},o=(r(a,i),a.locals?a.locals:{});t.exports=o},function(t,e,n){(e=n(5)(!1)).push([t.i,'.dailymotion-cpe:before{content:"";padding-top:56.25%;background:#000;display:block;-webkit-animation:slideInDown;animation:slideInDown;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-iteration-count:1;animation-iteration-count:1}@-webkit-keyframes slideInDown{from{padding-top:0}to{padding-top:56.25%}}@keyframes slideInDown{from{padding-top:0}to{padding-top:56.25%}}.dm__pre-video-title{text-align:var(--dm-video-align, center) !important;margin:var(--dm-video-margin, 8px 0) !important;font-style:var(--dm-video-style, normal) !important;color:var(--dm-video-color, #000) !important;font-size:var(--dm-video-size, 1.2em) !important;font-weight:var(--dm-video-weight, 700) !important}.dm__info-card{background:var(--dm-info-card-bg, #eee) !important;padding:var(--dm-info-card-padding, 8px 13px) !important;display:flex;text-align:var(--dm-info-card-align, left) !important;--dm-title-align: left;--dm-title-weight: 700;--dm-title-size: 1.1em}.dm__text-wrapper{width:calc(100% - 80px);padding-right:13px}.dm__video-title{text-align:var(--dm-title-align, center) !important;margin:var(--dm-title-margin, 8px 0) !important;font-style:var(--dm-title-style, normal) !important;color:var(--dm-title-color, inherit) !important;font-size:var(--dm-title-size, 1em) !important;font-weight:var(--dm-title-weight, 400) !important;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;max-width:100%}.dm__video-desc{text-align:var(--dm-desc-align, left) !important;margin:var(--dm-desc-margin, 0 0 8px) !important;font-style:var(--dm-desc-style, normal) !important;color:var(--dm-desc-color, inherit) !important;font-size:var(--dm-desc-size, 0.9em) !important;font-weight:var(--dm-desc-weight, inherit) !important;padding-top:13px;border-top:solid #666 1px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;max-width:100%;display:-webkit-box !important;-webkit-box-orient:vertical;-webkit-line-clamp:1}.dm__ava-wrapper{width:80px}.dm__owner-ava{width:100%;height:auto}.dm-player .insider.dm-disabled:after{content:"";width:100%;height:100%;position:absolute;top:0;left:0;background:rgba(0,0,0,0.6)}\n',""]),t.exports=e},,,function(t,e,n){"use strict";n.r(e);var r,a=n(6),i=n(1),o=function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function o(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))},s=function(t,e){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(t){i=[6,t],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},l="";o(void 0,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,Object(i.b)((function(){return void 0!==window.AmpVideoIframe}),100,5e3,"Timeout to get AmpVideoIframe")];case 1:return t.sent(),(window.AmpVideoIframe=window.AmpVideoIframe||[]).push(u),[2]}}))}));var u=function(t){r=t;var e=t.getMetadata();fetch(e.sourceUrl).then((function(t){return t.text()})).then((function(e){l=e.match("<title>(.*?)</title>")[1],c(),t.postEvent("canplay")}))},c=function(){return o(void 0,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return[4,Object(i.b)((function(){return document.querySelectorAll(".dm-player").length>0}),500,2e3,"Timeout to get DM placeholder")];case 1:return e.sent(),t=document.querySelectorAll(".dm-player"),new a.a(t,l),[2]}}))}))};window.addEventListener("cpeready",(function(t){var e=t.detail.players;return o(void 0,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=e[0],[4,Object(i.b)((function(){return null!==r}),500,2e3,"Timeout to get AMP Ready")];case 1:return n.sent(),t.addEventListener("playing",(function(t){console.log("playing"),r.postEvent("playing")})),t.addEventListener("pause",(function(t){console.log("pause"),r.postEvent("pause")})),t.addEventListener("end",(function(t){console.log("end"),r.postEvent("ended")})),t.addEventListener("controlschange",(function(e){console.log("changing",t)})),t.addEventListener("volumechange",(function(e){console.log("volumechange"),!0===t.muted?r.postEvent("muted"):r.postEvent("unmuted")})),r.method("play",(function(){console.log("AMP play"),t.play()})),r.method("pause",(function(){console.log("AMP pause"),t.pause()})),r.method("mute",(function(){console.log("AMP mute"),t.setMuted(!0)})),r.method("unmute",(function(){console.log("AMP unmute"),t.setMuted(!1)})),r.method("fullscreenenter",(function(){t.setFullscreen(!0)})),r.method("fullscreenexit",(function(){t.setFullscreen(!1)})),[2]}}))}))}))}]);
//# sourceMappingURL=dm-amp.min.js.map